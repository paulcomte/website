<!doctype html><html lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=UTF-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1,user-scalable=no" name=viewport><meta content="index, follow" name=robots><title>ðŸ“± Babel</title><meta content="ðŸ“± Babel" name=title><meta content="Paul Comte" name=author><meta content="Real-time messaging and voice client in C++" name=description><meta content=website property=og:type><meta content=https://paulcomte.cafe/projects/babel/ property=og:url><meta content="Paul Comte" property=og:site_name><meta content="ðŸ“± Babel" property=og:title><meta content="Real-time messaging and voice client in C++" property=og:description><meta content=https://paulcomte.cafe/favicon.ico property=og:image><meta content=summary_large_image property=twitter:card><meta content=https://paulcomte.cafe/projects/babel/ property=twitter:url><meta content="ðŸ“± Babel" property=twitter:title><meta content="Real-time messaging and voice client in C++" property=twitter:description><meta content=https://paulcomte.cafe/favicon.ico property=twitter:image><link href=https://paulcomte.cafe/projects/babel/ rel=canonical><link rel="shortcut icon" href=https://paulcomte.cafe/favicon.ico type=image/x-icon><link href=https://paulcomte.cafe/atom.xml rel=alternate title=RSS type=application/atom+xml><link href=https://paulcomte.cafe/css/style.css rel=stylesheet><script data-default-theme=dark defer id=config src=https://paulcomte.cafe/js/script.js></script><body><div class=wrapper><header><div class=header><div class=rss><a rel="noopener noreferrer" title="Subscribe via RSS for updates." class=icons__background href=https://paulcomte.cafe/atom.xml target=_blank><svg class="icons icons__background"><use href=https://paulcomte.cafe/icons.svg#rss></use></svg></a></div><nav class=navBar><a href=/> /home/ </a><a href=/projects> /projects/ </a><a href=/blog> /blog/ </a><a href=https://github.com/paulcomte> /github/ </a><a href=https://www.linkedin.com/in/im-paul-comte> /linkedin/ </a><div class=themeSwitch><button class="themeButton dark" onclick="setTheme('dark')" title="Dark mode"><svg class="icons icons__background"><use href=https://paulcomte.cafe/icons.svg#darkMode></use></svg></button><button class="themeButton light" onclick="setTheme('light')" title="Light mode"><svg class="icons icons__background"><use href=https://paulcomte.cafe/icons.svg#lightMode></use></svg></button></div></nav></div></header><main><div><a href=..>..</a>/<span class=metaData>babel</span></div><time datetime=2023-03-09>Started on: <span class=metaData>2023-03-09</span></time><br><time datetime=2023-04-19>Ended on: <span class=metaData>2023-04-19</span></time><address rel=author>By <span class=metaData>Paul Comte</span></address><h1>ðŸ“± Babel</h1><h2>Table of contents</h2><ul><li><a href=https://paulcomte.cafe/projects/babel/#repository>Repository</a><li><a href=https://paulcomte.cafe/projects/babel/#result>Result</a><li><a href=https://paulcomte.cafe/projects/babel/#introduction>Introduction</a> <ul><li><a href=https://paulcomte.cafe/projects/babel/#project-definition>Project definition</a> <ul></ul><li><a href=https://paulcomte.cafe/projects/babel/#tech-stack>Tech stack</a> <ul></ul><li><a href=https://paulcomte.cafe/projects/babel/#the-journey>The journey</a> <ul></ul></ul><li><a href=https://paulcomte.cafe/projects/babel/#frontend-architecture>Frontend architecture</a> <ul><li><a href=https://paulcomte.cafe/projects/babel/#scenes>Scenes</a> <ul><li><a href=https://paulcomte.cafe/projects/babel/#left-layout>Left layout</a><li><a href=https://paulcomte.cafe/projects/babel/#right-layout>Right layout</a></ul><li><a href=https://paulcomte.cafe/projects/babel/#event-system>Event system</a> <ul><li><a href=https://paulcomte.cafe/projects/babel/#login-failed>LOGIN_FAILED</a><li><a href=https://paulcomte.cafe/projects/babel/#logout>LOGOUT</a><li><a href=https://paulcomte.cafe/projects/babel/#contact-filter-update>CONTACT_FILTER_UPDATE</a><li><a href=https://paulcomte.cafe/projects/babel/#new-contact>NEW_CONTACT</a><li><a href=https://paulcomte.cafe/projects/babel/#new-bulk-contact>NEW_BULK_CONTACT</a><li><a href=https://paulcomte.cafe/projects/babel/#new-message>NEW_MESSAGE</a><li><a href=https://paulcomte.cafe/projects/babel/#new-bulk-message>NEW_BULK_MESSAGE</a><li><a href=https://paulcomte.cafe/projects/babel/#new-client>NEW_CLIENT</a><li><a href=https://paulcomte.cafe/projects/babel/#new-chatting>NEW_CHATTING</a><li><a href=https://paulcomte.cafe/projects/babel/#call-state-update>CALL_STATE_UPDATE</a></ul></ul><li><a href=https://paulcomte.cafe/projects/babel/#backend-architecture>Backend architecture</a> <ul><li><a href=https://paulcomte.cafe/projects/babel/#database-system>Database system</a> <ul></ul><li><a href=https://paulcomte.cafe/projects/babel/#transporter>Transporter:</a> <ul></ul></ul><li><a href=https://paulcomte.cafe/projects/babel/#difficulties>Difficulties</a><li><a href=https://paulcomte.cafe/projects/babel/#protocol-system>Protocol system</a><li><a href=https://paulcomte.cafe/projects/babel/#features>Features</a><li><a href=https://paulcomte.cafe/projects/babel/#limitations>Limitations</a><li><a href=https://paulcomte.cafe/projects/babel/#future>Future?</a></ul><h2 id=repository><a href=https://github.com/paulcomte/babel rel=noopener target=_blank>Repository</a></h2><h2 id=result>Result</h2><p><img alt=Result src=https://github.com/paulcomte/babel/raw/main/assets/preview.png><h2 id=introduction>Introduction</h2><h3 id=project-definition>Project definition</h3><p>This project was an <code>EPITECH</code> project, the project was defined as followed:<ul><li>A client interface<li>TCP communication between the client and the server<li>UDP communication between two clients<li>Send messages to another client<li>Retrieve client conversation (messages sent and received)</ul><h3 id=tech-stack>Tech stack</h3><ul><li>Programming language: C++<li>Window library: Qt<li>Server library: asio</ul><h3 id=the-journey>The journey</h3><p>During this project I wanted to have lots of fun, and on top of the mandatory features, implement other features that to me, should be available on every real-time messaging and voice app.<p>Regarding the interface I decided to take the Discord interface for idea.<p>This was the first ever project where I started by working on the frontend, whereas my usual habit would be to work on the backend.<p>I wanted to have a clearer view of the result I wanted to provide, and also improve my frontend skills.<p>And actually, starting by working on the frontend was a good choice for two main reasons:<ul><li><p>I did know in advance what features I would have on the client, so no time lost on the backend with unimplemented features on the client-side.</p><li><p>I lost a precious time trying to compile the frontend, so if I had to work on the frontend after the backend I might had not forseen this and Iâ€™d be unable to implement all features in time.</p><li><h2 id=frontend-architecture>Frontend architecture</h2></ul><blockquote><h3 id=scenes>Scenes</h3></blockquote><ul><li><h4 id=left-layout>Left layout</h4> <ul><li>User: <code>Icon | Username | Logout</code><li>Contact: <code>for contact in contacts => contactBox(contact)</code><li>Search: <code>Text input</code></ul><li><h4 id=right-layout>Right layout</h4> <ul><li>Chat info scene: <code>CallUp/HangUp Buttons</code><li>Chat scene: <code>for message in messages => messageBox(message)</code><li>Chat box scene: <code>Text input</code></ul></ul><blockquote><h3 id=event-system>Event system</h3></blockquote><p>The need for an event system was necessary the following interactions:<ul><li>When the user would interact on the client, such as changing the selected contact, or looking for a contact by its name<li>When the server would send a packet to the client.</ul><br><ul><li><h4 id=login-failed>LOGIN_FAILED</h4></ul><table><thead><tr><th style=text-align:center><u><strong>description</strong></u><th style=text-align:center>errorMessage<tbody><tr><td style=text-align:center><u><strong>field_type</strong></u><td style=text-align:center>string</table><ul><li><h4 id=logout>LOGOUT</h4></ul><table><thead><tr><th style=text-align:center><u><strong>description</strong></u><th style=text-align:center>empty<tbody><tr><td style=text-align:center><u><strong>field_type</strong></u><td style=text-align:center>empty</table><ul><li><h4 id=contact-filter-update>CONTACT_FILTER_UPDATE</h4></ul><table><thead><tr><th style=text-align:center><u><strong>description</strong></u><th style=text-align:center>newFilter<tbody><tr><td style=text-align:center><u><strong>field_type</strong></u><td style=text-align:center>string</table><ul><li><h4 id=new-contact>NEW_CONTACT</h4></ul><table><thead><tr><th style=text-align:center><u><strong>description</strong></u><th style=text-align:center>contact<tbody><tr><td style=text-align:center><u><strong>field_type</strong></u><td style=text-align:center>shared_ptr&LTClient></table><ul><li><h4 id=new-bulk-contact>NEW_BULK_CONTACT</h4></ul><table><thead><tr><th style=text-align:center><u><strong>description</strong></u><th style=text-align:center>contacts<tbody><tr><td style=text-align:center><u><strong>field_type</strong></u><td style=text-align:center>vector&LTshared_ptr&LTClient>></table><ul><li><h4 id=new-message>NEW_MESSAGE</h4></ul><table><thead><tr><th style=text-align:center><u><strong>description</strong></u><th style=text-align:center>message<tbody><tr><td style=text-align:center><u><strong>field_type</strong></u><td style=text-align:center>shared_ptr&LTMessage></table><ul><li><h4 id=new-bulk-message>NEW_BULK_MESSAGE</h4></ul><table><thead><tr><th style=text-align:center><u><strong>description</strong></u><th style=text-align:center>messages<tbody><tr><td style=text-align:center><u><strong>field_type</strong></u><td style=text-align:center>vector&LTshared_ptr&LTMessage>></table><ul><li><h4 id=new-client>NEW_CLIENT</h4></ul><table><thead><tr><th style=text-align:center><u><strong>description</strong></u><th style=text-align:center>client<tbody><tr><td style=text-align:center><u><strong>field_type</strong></u><td style=text-align:center>shared_ptr&LTClient></table><ul><li><h4 id=new-chatting>NEW_CHATTING</h4></ul><table><thead><tr><th style=text-align:center><u><strong>description</strong></u><th style=text-align:center>previousClient<th style=text-align:center>newClient<tbody><tr><td style=text-align:center><u><strong>field_type</strong></u><td style=text-align:center>shared_ptr&LTClient><td style=text-align:center>shared_ptr&LTClient></table><ul><li><h4 id=call-state-update>CALL_STATE_UPDATE</h4></ul><table><thead><tr><th style=text-align:center><u><strong>description</strong></u><th style=text-align:center>update<tbody><tr><td style=text-align:center><u><strong>field_type</strong></u><td style=text-align:center>shared_ptr&LTClient></table><h2 id=backend-architecture>Backend architecture</h2><blockquote><h3 id=database-system>Database system</h3></blockquote><ul><li>getMessages(string username) -> vector&LTMessage><li>getContacts(string username) -> vector&LTstring></ul><blockquote><h3 id=transporter><a href=https://github.com/paulcomte/babel/blob/main/server/Transporter.hpp rel=noopener target=_blank>Transporter</a>:</h3></blockquote><p>Every conneted clients on the server has a <code>Transporter</code>, it implements the following functions:<ul><li>sendMessage(string)<li>readMessage(function&LTvoid(string) receivedMessage> callback)<li>getHostname() -> string<li>close()<li>isClosed() -> bool</ul><h2 id=difficulties>Difficulties</h2><p>In this project I encountered a major difficulty, which was with the compilation of the project on the linux distribution <code>NixOS</code>, I lost a lot of time.<p>I also faced another difficulty, that I sadly could not resolve, the audio library in C++ seems like to not work on Linux, therefore I can only compile the client on Windows if I enable the voice call featureâ€¦<h2 id=protocol-system><a href=/blog/a-protocol-system>Protocol system</a></h2><p>One of the fundamental point in this project was the protocol system.<p>It needed to be as flexible and ergonomic as possible.<p>I implemented a protocol system which I got so proud of that <a href=/blog/a-protocol-system>I wrote an article</a> to explain how I proceedeed.<h2 id=features>Features</h2><ul><li>The icon of an user is automatically generated from his username.<li>Messages are stacked until <code>x</code> amount of time has passed, or <code>x</code> amount of messages has been sent.</ul><h2 id=limitations>Limitations</h2><p>Due to the limitations of my architecture, as it wasnâ€™t thought in time, and I didnâ€™t have time to refactor, the history of messages will only stack if the user switches to another conversation.<h2 id=future>Future?</h2><p>If I ever get the chance to work on the project again, I would fix the previously cited limitation, and improve the abstraction, such as:<p>Instead of the following function: <code>getContacts(string username)</code><blockquote><p>I would instead replace the <code>string</code> to an <code>Username</code> struct/class</blockquote><p class=tagsData></main><footer><hr><div class=footContainer><div><a href=https://512kb.club><img alt="a proud member of the green team of 512KB club" src=https://512kb.club/assets/images/green-team.svg></a></div><div><a title="250KB Club page" href=https://250kb.club/paulcomte-cafe> <img alt="badge: proud member of the 250KB Club" src=https://250kb.club/color_badge_dark.png> </a></div><div><a href=https://www.cutercounter.com/ target=_blank> <img alt="visitor counter" src="https://www.cutercounter.com/hits.php?id=hexpdofn&nd=1&style=1" border=0> </a></div></div></footer></div>